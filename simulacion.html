<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Asteroid Impact Visualizer ‚Äî Simulaci√≥n</title>

  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

  <!-- ===== ESTILOS ===== -->
  <style>
    /* ===== RESET ===== */
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      font-family: Inter,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;
      background: radial-gradient(circle at 20% 10%,rgba(255,255,255,0.02) 0,transparent 2px),
                  radial-gradient(circle at 80% 30%,rgba(255,255,255,0.01) 0,transparent 2px),
                  linear-gradient(180deg,#020416 0%, #061233 60%, #00121a 100%);
      color:#dfefff;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      padding-bottom:60px;
    }

    /* ===== TOPBAR ===== */
    .topbar{
      position:fixed;top:0;left:0;right:0;
      height:74px;display:flex;align-items:center;justify-content:space-between;
      gap:12px;padding:12px 20px;
      background:linear-gradient(180deg,rgba(5,12,30,0.92),rgba(3,6,12,0.85));
      border-bottom:1px solid rgba(255,255,255,0.04);
      z-index:200;backdrop-filter:blur(6px);
    }
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:54px;height:54px;border-radius:10px;padding:8px;
      background:linear-gradient(135deg,#062b6f,#003a7a);
      display:flex;align-items:center;justify-content:center;
      box-shadow:0 6px 18px rgba(0,80,170,0.12)}
    .logo svg{width:36px;height:36px;filter:drop-shadow(0 4px 12px rgba(0,160,255,0.12))}
    .brand-text h1{font-size:1.05rem;color:#bfe8ff;letter-spacing:0.6px}
    .brand-text p{font-size:0.78rem;color:#9ebed6;margin-top:2px}
    .menu-wrap{display:flex;align-items:center;gap:12px}
    .hamburger{
      font-size:22px;width:46px;height:46px;border-radius:10px;border:none;
      background:linear-gradient(180deg,#072a5a,#033663);color:#dff6ff;
      cursor:pointer;display:flex;align-items:center;justify-content:center;
      box-shadow:0 6px 18px rgba(0,90,180,0.12);
    }
    nav.nav{display:flex;gap:12px;align-items:center}
    nav.nav a{
      text-decoration:none;color:#dfefff;padding:8px 12px;border-radius:8px;
      font-weight:600;font-size:0.93rem;letter-spacing:0.2px;
      transition:all .18s ease;
    }
    nav.nav a:hover, nav.nav a.active{
      background:rgba(11,80,150,0.12);color:#bfe8ff;transform:translateY(-2px)
    }
    @media(max-width:900px){
      nav.nav{position:absolute;top:74px;right:18px;flex-direction:column;width:220px;
        background:linear-gradient(180deg,#02132b,#001528);padding:10px;border-radius:10px;
        box-shadow:0 10px 30px rgba(0,15,40,0.6);display:none}
      nav.nav.show{display:flex}
    }

    /* ===== HERO ===== */
    .small-hero{
      margin-top:90px;padding:22px 28px;
      background:radial-gradient(circle at 20% 10%,rgba(159,230,255,0.06),transparent 10%),
                 linear-gradient(180deg,#07122a,#081b34);
      border-radius:12px;margin-left:8%;margin-right:8%;
      box-shadow:0 8px 30px rgba(0,80,150,0.06);
    }
    .small-hero h2{color:#9fe6ff;margin-bottom:6px}
    .small-hero p{color:#cfeeff;opacity:0.95}

    /* ===== GRID ===== */
    .content-grid{
      display:grid;grid-template-columns:1fr 420px;gap:22px;
      align-items:start;max-width:1200px;margin:26px auto;padding:6px 20px 80px;
    }
    @media(max-width:980px){.content-grid{grid-template-columns:1fr;padding:6px 16px 80px}}

    /* ===== CARD ===== */
    .card{
      background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));
      border-radius:12px;padding:18px;border:1px solid rgba(90,160,240,0.06);
      box-shadow:0 8px 30px rgba(0,60,120,0.06);
    }
    .card h2{color:#9fe6ff;margin-bottom:8px}
    .threebox{height:420px;border-radius:12px;display:flex;flex-direction:column;overflow:hidden}
    #map{flex:1;width:100%;border-radius:10px;overflow:hidden}

    /* ===== FORM ===== */
    form{display:flex;flex-direction:column;gap:10px}
    label{font-weight:600;color:#dfefff}
    input[type=number],select{
      padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);
      background:rgba(255,255,255,0.02);color:inherit;
    }
    .toggle-group{display:flex;gap:12px;align-items:center}
    .btn{display:inline-block;padding:10px 14px;border-radius:8px;border:none;cursor:pointer;
      font-weight:700;background:linear-gradient(90deg,#00b7ff,#1e90ff);color:#001528;
      transition:transform .12s ease}
    .btn:hover{transform:translateY(-3px)}

    /* ===== RESULTS ===== */
    .results{margin-top:12px}
    .result-row{display:flex;gap:12px;flex-wrap:wrap}
    .result-card{flex:1 1 220px;background:rgba(255,255,255,0.02);padding:12px;border-radius:10px}
    .small-muted{font-size:0.9rem;color:#9fbfdf;margin-top:8px}
    .coords{font-family:monospace;font-size:0.9rem;color:#cfeeff}
    .spinner{display:inline-block;width:18px;height:18px;border-radius:50%;
      border:3px solid rgba(255,255,255,0.12);border-top-color:#00b7ff;
      animation:spin 1s linear infinite;vertical-align:middle;margin-left:8px}
    @keyframes spin{to{transform:rotate(360deg)}}

    /* ===== FOOTER ===== */
    .footer{margin-top:40px;text-align:center;padding:14px;color:#9ebed6}
  </style>
</head>

<body>
  <!-- TOPBAR -->
  <header class="topbar">
    <div class="brand">
      <div class="logo">
        <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" fill="none">
          <defs>
            <radialGradient id="g" cx="30%" cy="25%">
              <stop offset="0%" stop-color="#9fe6ff"/>
              <stop offset="60%" stop-color="#0a5fb0"/>
              <stop offset="100%" stop-color="#001a3a"/>
            </radialGradient>
          </defs>
          <rect width="64" height="64" rx="12" fill="url(#g)"/>
          <circle cx="22" cy="28" r="6" fill="#fff" opacity="0.12"/>
          <path d="M40 18c6 6 6 16 0 22" stroke="#fff" stroke-opacity="0.12" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </div>
      <div class="brand-text">
        <h1>Asteroid Impact Visualizer</h1>
        <p class="subtitle">Simulaci√≥n</p>
      </div>
    </div>
    <div class="menu-wrap">
      <button class="hamburger" id="hamburger">‚ò∞</button>
      <nav id="navMenu" class="nav">
        <a href="index.html">Inicio</a>
        <a href="simulacion.html" class="active">Simulaci√≥n</a>
        <a href="datos.html">Datos</a>
      </nav>
    </div>
  </header>

  <!-- HERO -->
  <section class="small-hero">
    <h2>üöÄ Simulaci√≥n de Impacto</h2>
    <p>Configura par√°metros, selecciona el punto en el mapa y obt√©n resultados estimados (educativo).</p>
  </section>

  <!-- GRID -->
  <main class="content-grid">
    <!-- IZQUIERDA -->
    <div>
      <div class="card">
        <h2>‚öô Par√°metros</h2>
        <form id="impactForm" onsubmit="return false;">
          <label>Di√°metro (m)
            <input id="diameter" type="number" value="50">
          </label>
          <label>Densidad (kg/m¬≥)
            <input id="density" type="number" value="3000">
          </label>
          <label>Velocidad (m/s)
            <input id="velocity" type="number" value="17000">
          </label>
          <label>√Ångulo de impacto (¬∞)
            <input id="angle" type="number" value="45">
          </label>
          <div style="margin-top:8px">
            <label>Tipo de superficie</label>
            <div class="toggle-group">
              <label><input type="radio" name="surface" value="ocean" checked> Oc√©ano</label>
              <label><input type="radio" name="surface" value="land"> Tierra</label>
            </div>
          </div>
          <div style="margin-top:12px">
            <button id="calcImpactBtn" class="btn">üîé Calcular impacto</button>
          </div>
        </form>
      </div>
      <div id="impactResults" class="card results" style="margin-top:14px;">
        <div id="resultsContent" style="opacity:0; transform:translateY(8px); transition:all .36s ease">
          <h3>üìä Resultados</h3>
          <p class="small-muted">Introduce valores y pulsa "Calcular impacto".</p>
        </div>
      </div>
    </div>

    <!-- DERECHA -->
    <div class="card threebox">
      <h2 style="margin-bottom:10px">üåç Mapa de Impacto</h2>
      <div id="map"></div>
      <div style="margin-top:10px" class="small-muted">Coordenadas:
        <span id="coords" class="coords">‚Äî</span>
      </div>
    </div>
  </main>

  <footer class="footer">
    <small>üöÄ Prototype ‚Ä¢ Datos: NASA &amp; USGS ‚Ä¢ Estimaciones educativas</small>
  </footer>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- SCRIPT -->
  <script>
  (function(){
    function fmt(n,d=2){if(!isFinite(n))return '‚Äî';if(Math.abs(n)>=1e6)return Number(n).toLocaleString();return Number(n).toLocaleString(undefined,{maximumFractionDigits:d});}
    function calcImpact({d,den,v,ang}){
      const vol=(4/3)*Math.PI*Math.pow(d/2,3);
      const m=den*vol;
      const E=0.5*m*Math.pow(v,2);
      const Mt=E/4.184e15;
      const crater=1.8*Math.pow(m,1/3)*Math.pow(v,1/3)/100;
      const mag=1.5+(Math.log10(Math.max(E,1))/1.5);
      const rkm=Math.max(0.01,10*Math.pow(Math.max(Mt,1e-9),1/3));
      return{vol,m,E,Mt,crater,mag,rkm};
    }
    const btn=document.getElementById('calcImpactBtn');
    const res=document.getElementById('resultsContent');
    const coords=document.getElementById('coords');
    const map=L.map('map').setView([20,0],2);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{attribution:'¬© OpenStreetMap'}).addTo(map);
    let marker=null,circle=null,pos=L.latLng(0,0);coords.textContent=pos.lat.toFixed(4)+', '+pos.lng.toFixed(4);
    map.on('click',e=>{pos=e.latlng;coords.textContent=pos.lat.toFixed(4)+', '+pos.lng.toFixed(4);
      if(marker)marker.setLatLng(pos);else marker=L.marker(pos,{draggable:true}).addTo(map);
      if(circle)circle.setLatLng(pos);});
    btn.addEventListener('click',()=>{
      const d=+document.getElementById('diameter').value;
      const den=+document.getElementById('density').value;
      const v=+document.getElementById('velocity').value;
      const ang=+document.getElementById('angle').value;
      const s=document.querySelector('input[name=surface]:checked').value;
      const o=calcImpact({d,den,v,ang});
      res.innerHTML=`<h3>üìä Resultados</h3>
      <div class="result-row">
        <div class="result-card"><strong>Masa</strong><div>${fmt(o.m,0)} kg</div></div>
        <div class="result-card"><strong>Energ√≠a</strong><div>${fmt(o.E,0)} J</div><div>${fmt(o.Mt,3)} Mt TNT</div></div>
        <div class="result-card"><strong>Cr√°ter</strong><div>${fmt(o.crater,1)} m</div></div>
        <div class="result-card"><strong>Magnitud s√≠smica</strong><div>${fmt(o.mag,2)} Mw</div></div>
      </div>
      <div style="margin-top:10px"><strong>Radio afectaci√≥n:</strong> ${fmt(o.rkm,2)} km</div>
      <div style="margin-top:10px"><strong>Ubicaci√≥n:</strong> ${pos.lat.toFixed(4)}, ${pos.lng.toFixed(4)} ‚Äî ${s==='ocean'?'Oc√©ano':'Tierra'}</div>`;
      res.style.opacity='1';res.style.transform='translateY(0)';
      if(circle)map.removeLayer(circle);
      circle=L.circle(pos,{radius:o.rkm*1000,color:'#ff6a00',fillColor:'#ff6a0033'}).addTo(map);
      map.fitBounds(circle.getBounds(),{maxZoom:6,padding:[40,40]});
    });
    document.getElementById('hamburger').addEventListener('click',()=>document.getElementById('navMenu').classList.toggle('show'));
  })();
  </script>
</body>
</html>
